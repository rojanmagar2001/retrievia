# App
APP_NAME=retrievia-api
APP_ENV=development
API_HOST=0.0.0.0
API_PORT=8000
LOG_LEVEL=INFO
LOG_JSON=true
LOG_INCLUDE_TIMESTAMP=true
WORKER_CONCURRENCY=2
METRICS_ENABLED=true

# Tracing / OpenTelemetry flags
TRACING_ENABLED=false
OTEL_ENABLED=false
OTEL_SERVICE_NAME=retrievia-api
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=1.0

# Security
JWT_SECRET_KEY=CHANGE_ME_WITH_A_LONG_RANDOM_SECRET
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_MINUTES=10080
JWT_ISSUER=retrievia
JWT_AUDIENCE=retrievia-clients

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=60
RATE_LIMIT_WINDOW_SECONDS=60

# Postgres
POSTGRES_USER=retrievia
POSTGRES_PASSWORD=retrievia
POSTGRES_DB=retrievia
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DATABASE_URL=postgresql+psycopg://retrievia:retrievia@postgres:5432/retrievia
ASYNC_DATABASE_URL=postgresql+asyncpg://retrievia:retrievia@postgres:5432/retrievia

# Redis / Celery
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_URL=redis://redis:6379/0
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2

# Pinecone
PINECONE_API_KEY=YOUR_PINECONE_API_KEY
PINECONE_INDEX_NAME=YOUR_PINECONE_INDEX_NAME
PINECONE_INDEX_DIMENSION=3072
PINECONE_INDEX_METRIC=cosine
PINECONE_CLOUD=aws
PINECONE_REGION=us-east-1
PINECONE_NAMESPACE_PREFIX=tenant
PINECONE_NAMESPACE_STRATEGY=tenant_env

# Gemini
GEMINI_API_KEY=YOUR_GEMINI_API_KEY
GEMINI_MODEL=gemini-2.5-flash
GEMINI_EMBEDDING_MODEL=gemini-embedding-001
GEMINI_TIMEOUT_SECONDS=30

# Ingestion
INGESTION_CHUNK_SIZE=1200
INGESTION_CHUNK_OVERLAP=200
INGESTION_EMBED_BATCH_SIZE=32
LOCAL_UPLOAD_ROOT=./var/uploads

# Retrieval
RETRIEVAL_TOP_K=6
RETRIEVAL_FETCH_K=24
RETRIEVAL_USE_MMR=true
RETRIEVAL_MMR_LAMBDA=0.7
RETRIEVAL_RERANK_ENABLED=false
